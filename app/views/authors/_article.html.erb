<%#
  # Copyright (c) 2011 Martin Fenner
  # Licensed under the Apache License, Version 2.0 (the "License");
  # you may not use this file except in compliance with the License.
  # You may obtain a copy of the License at
  #
  #     http://www.apache.org/licenses/LICENSE-2.0
  #
  # Unless required by applicable law or agreed to in writing, software
  # distributed under the License is distributed on an "AS IS" BASIS,
  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  # See the License for the specific language governing permissions and
  # limitations under the License.
-%>
<div class="layout">
  <% unless @author.articles.empty? %>
    <h3>
      <%= pluralize(@author.articles.count, 'Article') %>
    </h3>
	<table>
    <% for article in @author.articles %>
      <tr>
      	<td class="name">
      	  <span class="name"><%= link_to (article.title.blank? ? article.doi : h(article.title)), :controller => "articles", :action => "show", :id => article.doi, :format => :html %></span><br/>
			<% unless article.authors.empty? %>
          	  <% article.authors.each do |author| %>
          	    <%= link_to_unless_current(h(author.name), :controller => "authors", :action => "show", :id => author.mas_id, :format => :html) %>, 
              <% end %>
            <% end %>
      	</td>
      	<td class="count">
	      <%= article.citations_count == 0 ? "&nbsp;" : article.citations_count %>
	    </td>
	  </tr>
    <% end %>
	</table>
  <% else %>
    <h3>No articles found</h3>
  <% end %>

</div>